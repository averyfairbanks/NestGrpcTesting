syntax = "proto3";

import 'google/protobuf/struct.proto';
import 'google/protobuf/empty.proto';

package blog;

service BlogService {
  rpc GetBlog(GetBlogRequest) returns (Blog);
  rpc ListBlogs(google.protobuf.Empty) returns (ListBlogsResponse);
  rpc Create(CreateRequest) returns (Blog);
  rpc Update(UpdateRequest) returns (Blog);
}

message Blog {
  int32                  id     = 1;
  string                 title  = 2;
  string                 author = 3;
  google.protobuf.Struct body   = 4;
}

message GetBlogRequest {
  oneof lookup {
    int32  id    = 1;
    string title = 2;
  }
}

message ListBlogsResponse {
  repeated Blog blogs = 1;
}

message CreateRequest {
  string                 title  = 1;
  string                 author = 2;
  google.protobuf.Struct body   = 3;
}

message UpdateRequest {
  int32                           id     = 1;
  optional string                 title  = 2;
  optional string                 author = 3;
  optional google.protobuf.Struct body   = 4;
}